import{_ as S,a as $,m as j,r as m,o,c as a,e as d,b as e,F as u,g,i as r,t as c,n as P,k as v,v as L,w as C,u as V,f as I}from"./index-a352aac4.js";import{P as M}from"./PageHeader-ffb7cc6f.js";import{C as N,a as x}from"./order-ebf801a2.js";import{a as l}from"./common-10f7587a.js";import{c as b}from"./cartStore-794f6400.js";import{t as p}from"./request-a94ccf31.js";const U="/hexschool-vue-ecommerce/assets/page_cart-3a9fcf63.jpg",B={data(){return{isCouponCodeShow:!0,couponCode:"",pageImage:U}},components:{PageHeader:M,CartStep:N},methods:{...$(b,["getCartList","updateCart","deleteCartItem","clearCartItem","goNextStep","checkStep","couponPercent"]),async addCoupon(){l().isProcessing=!0;try{await x({data:{code:this.couponCode}}).then(async t=>{await this.getCartList(),this.isCouponCodeShow=!1,l().isProcessing=!1,this.couponCode="",await p.fire({icon:"success",title:`${t.message}`})})}catch(t){l().isProcessing=!1,l().isLoading=!1,await p.fire({icon:"error",title:`${t.response.data.message}`})}},async removeCoupon(){try{await x({data:{code:"coupon_clear"}}).then(async()=>{await this.getCartList(),this.isCouponCodeShow=!1,l().isProcessing=!1,await p.fire({icon:"success",title:"已移除優惠券"})})}catch(t){l().isProcessing=!1,l().isLoading=!1,await p.fire({icon:"error",title:`${t.response.data.message}`})}}},computed:{...j(b,["cart","currentStep","cartCoupon"])},created(){this.getCartList(),l().isLoading=!0},mounted(){this.checkStep(1)}},H={class:"container"},q={class:"flex flex-col lg:flex-row space-y-8 lg:space-y-0 lg:space-x-8"},D={class:"lg:w-[66.666%]"},F={class:"flex flex-col space-y-4"},T={class:"overflow-hidden hidden md:flex flex-shrink-0 w-[140px] [&:not(:last-child)]:mr-4"},z={class:"overflow-hidden"},A=["src","alt"],E={class:"flex flex-col md:flex-row md:items-center md:justify-between w-full space-y-4 md:space-y-0"},Q={class:"w-full md:w-auto md:flex-1 md:pr-4"},G={class:"font-bold ch-heading-3 line-clamp-2"},J={href:""},K={class:"flex flex-1 items-center md:justify-end md:flex-shrink-0"},O={class:"ch-body"},R=e("label",{for:"",class:"hidden"},"Qty:",-1),W={class:"form-select"},X=["onUpdate:modelValue","onChange"],Y=e("option",{selected:"",disabled:""},"選擇數量",-1),Z=["value"],ee={class:"flex items-center justify-end flex-shrink-0 min-w-[120px] ml-auto"},te={class:"flex flex-col items-end min-w-[50px] space-y-1"},se={key:0,class:"en-caption-02 line-through text-right"},oe={class:"en-body text-right text-secondary-secondary-200"},ae=["onClick"],ne=e("span",{class:"material-symbols-outlined ch-heading-2"}," close ",-1),ce=[ne],le={class:"flex items-center justify-between"},re={key:0},ie={key:1,class:"flex space-x-4 ch-heading-4 font-bold text-netural-netural-300"},de=e("span",null,"共",-1),ue={class:"en-body text-secondary-secondary-200"},pe=e("span",null,"件商品",-1),he={class:"flex flex-col lg:w-[33.333%]"},fe={class:"sticky top-[72px] inset-x-0 space-y-8"},_e={class:"flex flex-col p-4 md:p-6 space-y-4 bg-netural-netural-200"},me=e("h2",{class:"font-bold ch-heading-2"},"購物車",-1),ye={class:"flex flex-col space-y-2 pb-3"},ge={class:"flex justify-between"},ve=e("p",{class:"font-bold ch-body"},"小計：",-1),Ce={key:0,class:"flex justify-between"},xe=e("p",{class:"font-bold ch-body"},"折扣後：",-1),be={class:"flex-shrink-0 en-caption-01"},we={key:1,class:"flex items-center space-x-2"},ke={class:"font-bold ch-body text-netural-netural-300"},Se=e("span",{class:"material-symbols-outlined ch-heading-4 text-netural-netural-100"}," close ",-1),$e=[Se],je={class:"flex justify-between"},Pe=e("p",{class:"font-bold ch-heading-4"},"總計:",-1),Le={class:"flex-shrink-0 en-body text-secondary-secondary-200"},Ve={class:"p-4 md:p-6 bg-netural-netural-200"},Ie={class:"flex items-center"},Me={class:"input-group"},Ne={key:1,class:"flex flex-col justify-center space-y-4 max-w-[800px] mx-auto"},Ue=e("p",{class:"ch-heading-3 text-center"}," 您的購物車目前有一點空虛，快來挑選一些商品吧！ ",-1),Be={class:"py-4 text-center"};function He(t,n,qe,De,h,f){const w=m("PageHeader"),k=m("CartStep"),y=m("router-link");return o(),a(u,null,[d(w,{"image-url":h.pageImage},null,8,["image-url"]),e("div",H,[t.cart.carts&&t.cart.carts.length>=1?(o(),a(u,{key:0},[d(k,{"current-step":t.currentStep},null,8,["current-step"]),e("div",q,[e("div",D,[e("div",F,[t.cart.carts?(o(!0),a(u,{key:0},g(t.cart.carts,s=>(o(),a("div",{class:"flex items-center p-4 bg-netural-netural-200",key:s.id},[e("div",T,[d(y,{to:`/product/${s.product.id}`,class:"flex items-center w-full",target:"_blank"},{default:C(()=>[e("div",z,[e("img",{class:"w-[140px] h-[90px] object-cover",src:s.product.imageUrl,alt:s.product.title},null,8,A)])]),_:2},1032,["to"])]),e("div",E,[e("div",Q,[e("h3",G,[e("a",J,c(s.product.title),1)])]),e("div",K,[e("div",O,[R,e("div",W,[v(e("select",{name:"",id:"","onUpdate:modelValue":i=>s.qty=i,onChange:i=>t.updateCart(s)},[Y,(o(),a(u,null,g(30,(i,_)=>e("option",{key:_,value:_+1},c(_+1),9,Z)),64))],40,X),[[V,s.qty,void 0,{number:!0}]])])]),e("div",ee,[e("div",te,[s.final_total!==s.total?(o(),a("div",se," $"+c(t.$filters.currency(Math.round(s.total))),1)):r("",!0),e("div",oe," $"+c(t.$filters.currency(Math.round(s.final_total))),1)])]),e("div",{class:"flex items-center justify-center w-10 h-10 ml-4 cursor-pointer",onClick:i=>t.deleteCartItem(s)},ce,8,ae)])])]))),128)):r("",!0),e("div",le,[t.cart.carts&&t.cart.carts.length>0?(o(),a("div",re,[e("button",{class:"btn-outline",type:"button",onClick:n[0]||(n[0]=(...s)=>t.clearCartItem&&t.clearCartItem(...s))}," 清空購物車 ")])):r("",!0),t.cart.carts&&t.cart.carts.length>0?(o(),a("div",ie,[de,e("p",ue,c(t.cart.carts.length),1),pe])):r("",!0)])])]),e("div",he,[e("div",fe,[e("div",_e,[me,e("div",ye,[e("div",ge,[ve,e("p",{class:P(["flex-shrink-0 en-caption-01",{"line-through":t.cartCoupon.code}])}," $"+c(t.$filters.currency(t.cart.total)),3)]),t.cart.final_total!==t.cart.total?(o(),a("div",Ce,[xe,e("p",be," $"+c(t.$filters.currency(Math.round(t.cart.final_total))),1)])):r("",!0),t.cartCoupon.code?(o(),a("div",we,[e("p",ke," 已套用 "+c(t.cartCoupon.code),1),e("div",{class:"flex items-center justify-center rounded-full w-6 h-6 bg-netural-netural-300 cursor-pointer",title:"移除優惠券",onClick:n[1]||(n[1]=(...s)=>f.removeCoupon&&f.removeCoupon(...s))},$e)])):r("",!0)]),e("div",je,[Pe,e("p",Le," $"+c(t.$filters.currency(Math.round(t.cart.final_total))),1)]),e("button",{type:"button",class:"btn-base w-full bg-secondary-secondary-200 text-netural-netural-100",onClick:n[2]||(n[2]=s=>t.goNextStep(2,"/order"))}," 前往結帳 ")]),e("div",Ve,[e("div",Ie,[e("div",Me,[v(e("input",{type:"text",class:"form-input",placeholder:"輸入優惠券代碼","onUpdate:modelValue":n[3]||(n[3]=s=>h.couponCode=s)},null,512),[[L,h.couponCode]]),e("button",{type:"button",class:"flex-shrink-0 p-4 whitespace-nowrap bg-netural-netural-400 text-netural-netural-100",onClick:n[4]||(n[4]=s=>f.addCoupon())}," 套用 ")])])])])])])],64)):(o(),a("div",Ne,[Ue,e("div",Be,[d(y,{class:"btn-base text-netural-netural-100 bg-secondary-secondary-100",to:"/products"},{default:C(()=>[I("瀏覽推薦行程")]),_:1})])]))])],64)}const Ge=S(B,[["render",He]]);export{Ge as default};
